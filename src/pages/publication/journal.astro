---
import BaseLayout from "../../layouts/BaseLayout.astro";
import type { MarkdownInstance } from "astro";

type FM = {
  title: string;
  year?: number;
  venue?: string;
  authors?: string;
  link_url?: string;
};

const modules = import.meta.glob<MarkdownInstance<FM>>("/src/content/publication/journal/*.md");
const items = await Promise.all(Object.values(modules).map((fn) => fn()));

items.sort((a, b) => (b.frontmatter.year ?? 0) - (a.frontmatter.year ?? 0));
---

<BaseLayout title="Journal">
  <h1>Journal</h1>
  <div class="grid">
    {items.map((it) => (
      <div class="card">
        <div><strong>
          <a href={it.frontmatter.link_url} target="_blank" rel="noreferrer">
            {it.frontmatter.title}
          </a>
        </strong></div>
        <div class="muted">
          {it.frontmatter.year} · {it.frontmatter.venue}{it.frontmatter.authors ? ` · ${it.frontmatter.authors}` : ""}
        </div>
      </div>
    ))}
  </div>
</BaseLayout>
