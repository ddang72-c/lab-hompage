---
import SectionLayout from "../../layouts/SectionLayout.astro";
import type { MarkdownInstance } from "astro";

type FM = { name?: string };

const modules = import.meta.glob<MarkdownInstance<FM>>("/src/content/people/professor.md");
const loaders = Object.values(modules);

let name = "";
let Content: any = null;

if (loaders.length > 0) {
  const entry = (await loaders[0]()) as MarkdownInstance<FM>;
  name = (entry.frontmatter?.name ?? "").toString();
  Content = entry.Content;
}
---

<SectionLayout title="Professor">
  <style is:global>
    .prof-wrap {
      max-width: 1040px;
      margin: 24px auto 0;
      padding: 0 18px;
    }

    .prof-name {
      margin: 0 0 12px 0;
      font-size: 2rem;
      font-weight: 800;
      line-height: 1.2;
    }

    .prof-body {
      line-height: 1.7;
    }
  </style>

  {Content ? (
    <article class="prof-wrap">
      {name && <h2 class="prof-name">{name}</h2>}
      <div class="prof-body">
        <Content />
      </div>
    </article>
  ) : (
    <p class="muted" style="margin-top:24px;">No professor profile yet.</p>
  )}
</SectionLayout>
