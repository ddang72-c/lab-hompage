---
import SectionLayout from "../../layouts/SectionLayout.astro";
import type { MarkdownInstance } from "astro";

const nav = [
  { label: "Professor", href: "/people/professor/" },
  { label: "Students", href: "/people/students/" },
  { label: "Alumni", href: "/people/alumni/" },
];

type FM = Record<string, any>;
const modules = import.meta.glob<MarkdownInstance<FM>>("/src/content/people/professor.md");

const entry = (await Object.values(modules)[0]()) as MarkdownInstance<FM>;
const { Content, frontmatter } = entry;

const name = frontmatter?.name ?? "";
const title = frontmatter?.title ?? frontmatter?.position ?? "";
const email = frontmatter?.email ?? "";
const photo = frontmatter?.photo ?? "";
const page = frontmatter?.page ?? "";
---

<SectionLayout title="Professor" sectionLabel="PEOPLE" navItems={nav} heroSrc="/images/sub-hero.jpg">
  <h1>Professor</h1>

  <article style="display:flex; gap:20px; padding:16px; border:1px solid #eee; border-radius:14px; margin-top:24px;">
    {photo && (
      <img
        src={photo}
        alt={name || "Professor"}
        style="width:180px; height:180px; object-fit:cover; border-radius:12px;"
        loading="lazy"
      />
    )}

    <div style="flex:1;">
      {(name || title) && (
        <div style="margin-bottom:10px;">
          {name && <h2 style="margin:0 0 6px 0;">{name}</h2>}
          {title && <div style="opacity:.8;">{title}</div>}
        </div>
      )}

      <div style="display:grid; gap:6px; margin-bottom:12px;">
        {email && (
          <div>
            <b>Email:</b> {email}
          </div>
        )}
        {page && (
          <div>
            <b>Page:</b>{" "}
            <a href={page} target="_blank" rel="noreferrer">
              {page}
            </a>
          </div>
        )}
      </div>

      <div style="line-height:1.7;">
        <Content />
      </div>
    </div>
  </article>
</SectionLayout>
